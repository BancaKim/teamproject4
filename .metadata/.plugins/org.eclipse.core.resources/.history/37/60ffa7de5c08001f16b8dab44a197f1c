<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<!DOCTYPE html>

<html>
<p><center>
<head>
<meta charset="UTF-8">
<title> 회원가입 </title> 
<br>
<h1 style = size = 3> 회원가입 </h1>
<style>
body {
    background-image: url("https://designbase.co.kr/wp-content/uploads/2021/08/gradientreference_main.jpg");
    background-repeat: no-repeat;
    background-size: cover;
    justify-content: center;
    align-items: center;
    font-family: Arial, Helvetica, sans-serif;
}

.container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    text-align: center;
    flex-direction: column; 
}

form {
    margin: auto;
    padding: 20px;
    border: 1px solid #ccc; /* 폼에 테두리 추가 */
    border-radius: 5px; /* 폼 모서리를 둥글게 */
    background-color: #f9f9f9; /* 폼 배경색 */
}

#maintitle {
    background-color: white;
    font-size: 40px;
    font-family: Arial, Helvetica, sans-serif;
    font-weight: 600;
    text-align: center;
}

table {
    margin-left: auto;
    margin-right: auto;
    border-collapse: collapse; /* 테이블 테두리 중복 제거 */
}

table, th, td {
    border: 1px solid #ddd; /* 테이블과 셀에 테두리 적용 */
}

th, td {
    padding: 8px; /* 셀 내부 패딩 */
    text-align: left; /* 텍스트 왼쪽 정렬 */
}

tr:nth-child(even) {
    background-color: #f2f2f2; /* 짝수 번째 행의 배경색 */
}

.subtitle, .title {
    font-weight: bold; /* 제목 볼드 처리 */
    background-color: rgb(214, 171, 212);
}

/* .title {
    color: white;
    font-size:20px;
    font-family: Arial, Helvetica, sans-serif;
    font-weight:800;
    width:800px;
    background-color: rgb(226, 97, 209);
}

.subtitle {
    background-color: rgb(214, 171, 212);
} */
.input-text {
    width: 100%; /* 입력 필드 너비 */
    padding: 10px; /* 입력 필드 내부 패딩 */
    margin: 5px 0; /* 입력 필드 마진 */
    box-sizing: border-box; /* 박스 크기 지정 방법 변경 */
}

.button {
    margin-top: 20px; /* 버튼 위쪽 마진 */
}

.subbutton {
    padding: 10px 20px; /* 버튼 패딩 */
    margin-right: 10px; /* 오른쪽 버튼 마진 */
    border: none; /* 버튼 테두리 제거 */
    border-radius: 5px; /* 버튼 모서리 둥글게 */
    background-color: #ad0992; /* 버튼 배경색 */
    color: white; /* 버튼 텍스트 색상 */
    cursor: pointer; /* 마우스 커서 모양 변경 */
}

.subbutton:hover {
    background-color: #9d18b8; /* 버튼에 마우스를 올렸을 때의 배경색 */
}
</style>
<script>
let sword = ["!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "-", "+", "_", "=", "`", "~", ";", ":", "'", '"', ",", ".", "/", "?"];
let id;
let pwd;
let conPwd;
let myName;
let mailaddr;
let ssn;
let intro;

function checkedForm() {
    id = document.getElementById("id").value;
    pwd = document.getElementById("my_pwd").value;
    conPwd = document.getElementById("my_pwd_chk").value;
    myName = document.getElementById("my_name").value;
    mailaddr = document.getElementById("mailaddr").value;
    ssn = document.getElementById("ssn").value;
    intro = document.getElementById("intro").value;
    if (!checkedId()) { return; }
    if (!checkedPw()) { return; }
    if (!confirmPw()) { return; }
    if (!checkedEmail()) { return; }
    if (!isNameNull()) { return; }
    if (!checkedSSN()) { return; }
    inputYear();
    inputMonth();
    inputDay();
    if (!checkedHobby()) { return; }
    if (!checkedIntro()) { return; }
    regiform();
}

function checkedId() {
    if (id.length < 4 || 12 < id.length) {
        alert("ID 형식이 유효하지 않습니다.(길이제한)");
        return false;
    }
    for (let i = 0; i < sword.length; i++) {
        if (id.includes(sword[i])) {
            alert("ID 형식이 유효하지 않습니다.(특수문자 사용불가)");
            return false;
        }
    }
    return true;
}

function checkedPw() {
    if (pwd.length < 4 || 12 < id.length) {
        alert("비밀번호 형식이 유효하지 않습니다.(길이제한)");
        return false;
    }
    for (let i = 0; i < sword.length; i++) {
        if (pwd.includes(sword[i])) {
            alert("비밀번호 형식이 유효하지 않습니다.(특수문자 사용불가)");
            return false;
        }
    }
    if (id == pwd) {
        alert("ID와 비밀번호는 일치할 수 없습니다.");
        return false;
    }
    return true;
}

function confirmPw() {
    if (pwd != conPwd) {
        alert("비밀번호가 일치하지 않습니다.");
        return false;
    }
    return true;
}

function checkedEmail() {
    let email = "";
    if (mailaddr.indexOf("@") == 0 || mailaddr.indexOf("@") == mailaddr.length - 1 || mailaddr.indexOf(".") == 0 || mailaddr.indexOf(".") == 1 || mailaddr.indexOf(".") == mailaddr.length - 1) {
        alert("이메일의 형식이 올바르지 않습니다.")
        return false;
    }
    return true;
}

function isNameNull() {
    if (myName == "" || myName == undefined) {
        alert("이름을 입력해주세요!");
        return false;
    }
    return true;
}

function checkedSSN() {
    result = 0;
    for (i = 0; i < ssn.length - 1; i++) {
        if (i <= 7) {
            result += parseInt(ssn[i]) * (2 + i);
        } else {
            result += parseInt(ssn[i]) * (i - 6);
        }
    }
    ans = (11 - (result % 11)) % 10;

    if (ans != ssn[12]) {
        alert("주민번호 오류입니다.");
        return false;
    }
    return true;
}

function inputYear() {
    let birthYear = "";
    let checkYear = ssn[6];
    if (checkYear == "1" || checkYear == "2") {
        birthYear = "19" + ssn[0] + ssn[1];
    } else if (checkYear == "3" || checkYear == "4") {
        birthYear = "20" + ssn[0] + ssn[1];
    };
    document.getElementById("year").value = birthYear;
}

function inputMonth() {
    let birthMonth = "";
    if (ssn[2] == 0) {
        birthMonth = ssn[3];
    } else {
        birthMonth = ssn[2] + ssn[3];
    }
    document.getElementById("month").value = birthMonth;
}

function inputDay() {
    let birthDay = "";
    if (ssn[4] == 0) {
        birthDay = ssn[5];
    } else {
        birthDay = ssn[4] + ssn[5];
    }
    document.getElementById("day").value = birthDay;
}

function checkedHobby() {
    let isChecked = false;
    let checkboxes = document.getElementsByName("fav_hob");

    for (let i = 0; i < checkboxes.length; i++) {
        if (checkboxes[i].checked) {
            isChecked = true;
            break;
        }
    }
    if (!isChecked) {
        alert("선택해주세요!");
        return false;
    }

    return true;
}

function checkedIntro() {
    if (intro.length < 10) {
        alert("10글자 이상 자기소개를 입력해주세요.");
        return false;
    }
    return true;
}

function regiform() {
    let regiform = document.getElementById("regiform");
    regiform.submit();
}

</script>
</head>

<body background="dog.jpg">

<form action = "signupResult.jsp">

<table bgcolor = "white" border="1">

<tr style="height: 40px;">
<td colspan="2" bgcolor="pink"> <center> 회원기본정보 </td>
</tr>

<tr> 
<td bgcolor="gray"> <center> 아이디: </td>
<td> <input type="text" name="id" size="20"> 4~12자의 영문 대소문자와 숫자로만 입력 </td>
</tr>

<tr> 
<td bgcolor="gray"> <center> 비밀번호: </td>
<td> <input type="password" name="password" size="20"> 4~12자의 영문 대소문자와 숫자로만 입력 </td>
</tr>

<tr> 
<td bgcolor="gray">  <center>비밀번호확인: </td>
<td><input type="password" name="checkPassword" size="20"> </td>
</tr>

<tr> 
<td bgcolor="gray"> <center>메일주소: 
<td> <input type="text" name="email" size="20"> 예)  id@domain.com </td>
</tr>

<tr> 
<td bgcolor="gray">  <center>이름: 
<td> <input type="text" name="userName" size="20"> </td>
</tr>

<tr style="height: 40px;">
<td colspan="2" bgcolor="pink"> <center> 개인 신상 정보 </td>
</tr>

<tr> 
<td bgcolor="gray"> <center> 주민등록번호: </td>
<td> <input type="text" name="ssn" size="20"> 예)1234561234567 </td>
</tr>

<tr> 
<td bgcolor="gray"> <center> 생일: </td>
<td> <input type="text" name="birthYear" size="10">년
<select name="birthMonth">
<option value="1"> 1</option>
<option value="2"> 2</option>
<option value="3"> 3</option>
<option value="4"> 4</option>
<option value="5"> 5</option>
<option value="6"> 6</option>
<option value="7"> 7</option>
<option value="8"> 8</option>
<option value="9"> 9</option>
<option value="10"> 10</option>
<option value="11"> 11</option>
<option value="12"> 12</option>
</select> 월
<select name="birthDay">
<option value="1"> 1</option>
<option value="2"> 2</option>
<option value="3"> 3</option>
<option value="4"> 4</option>
<option value="5"> 5</option>
<option value="6"> 6</option>
<option value="7"> 7</option>
<option value="8"> 8</option>
<option value="9"> 9</option>
<option value="10"> 10</option>
<option value="11"> 11</option>
<option value="12"> 12</option>
<option value="13"> 13</option>
<option value="14"> 14</option>
<option value="15"> 15</option>
<option value="16"> 16</option>
<option value="17"> 17</option>
<option value="18"> 18</option>
<option value="19"> 19</option>
<option value="20"> 20</option>
<option value="21"> 21</option>
<option value="22"> 22</option>
<option value="23"> 23</option>
<option value="24"> 24</option>
<option value="25"> 25</option>
<option value="26"> 26</option>
<option value="27"> 27</option>
<option value="28"> 28</option>
<option value="29"> 29</option>
<option value="30"> 30</option>
<option value="31"> 31</option>
</select> 일
</tr>

<tr> 
<td bgcolor="gray">  <center> 관심분야: </td>
<td>
    <input type="checkbox" name="hobby" value="컴퓨터">컴퓨터
    <input type="checkbox" name="hobby" value="인터넷">인터넷
    <input type="checkbox" name="hobby" value="여행">여행
    <input type="checkbox" name="hobby" value="영화감상" >영화감상
    <input type="checkbox" name="hobby" value="음악감상" >음악감상
</td>
</tr>

<tr> 
<td bgcolor="gray"> <center> 자기소개: </td>
<td> <center> <textarea name = "introduction" cols="70" rows="10" style="width: 100%; height: 300%;" ></textarea> </td>
</tr>

</table>

<br>

<tr>
<td>
<input type="submit" value="회원 가입" onclick="checkedForm()"> 
&nbsp&nbsp 
<input type="reset" value="다시 입력" onclick="clearForm()">
</td>
</tr>
</form>

</p> 

</body>

</html>
