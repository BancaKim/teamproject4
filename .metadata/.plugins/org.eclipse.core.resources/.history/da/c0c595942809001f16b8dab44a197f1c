<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.util.*"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>setProduct page</title>
<style>
@font-face{
font-family:'DNFBitBitv2';
font-style:normal;font-weight:400;src:url('//cdn.df.nexon.com/img/common/font/DNFBitBitv2.otf')format('opentype')}

*{
font-family: 'DNFBitBitv2'}

.fruits-container {
background-color: red;
display: flex;
align-items: center;
justify-content: center;
}
.fruits {
background-color: blue;
width: 500px;
}
</style>
</head>
<body>
	<h2 align="center">Choose items</h2>
	<hr>
	<div align="center">
	<%request.setCharacterEncoding("UTF-8");
	
		String username1 = request.getParameter("name");
		if(username1 != null) {
			session.setAttribute("username", username1);
		}
		
		HashMap<String, Integer> map = (HashMap<String, Integer>) session.getAttribute("itemMap");
			if (map==null){
				map = new HashMap<String, Integer>();
			}
			session.setAttribute("itemMap", map);
	%>
	<% if (username1==""){ %>
	<script>
		alert("ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ê³  ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
		history.back();
	</script>
	<% }else if(session.getAttribute("username") == null){
		response.sendRedirect("login.jsp");
	}else{%>
	- Gamja Market shop - <br>

	<%= session.getAttribute("username")%>ë‹˜ì˜ ë¡œê·¸ì¸ í˜ì´ì§€ì…ë‹ˆë‹¤. <br>
	êµ¬ë§¤ë¥¼ ì›í•˜ëŠ” í’ˆëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.
	<%} %>
	</div>
	<div align="right">
		<form action="logOut.jsp">
			<input type="submit" value="ë¡œê·¸ì•„ì›ƒ">
		</form>
	</div>
	<hr>
	<div class="fruits-container">
		<div class="fruits">
		<form name = "form1" method="post" action="add.jsp">
			<table>
				<tr>
					<td><input type="hidden" name="apple" value="ì‚¬ê³¼">ğŸì‚¬ê³¼</td>
					<td><button type="button" onclick="modifyQuantity('apple_num', -1)">-</button>
					<td><input type="number" name="apple_num" id="apple_num" value= <%= map.get("ì‚¬ê³¼") %>></td>
					<td><button type="button" onclick="modifyQuantity('apple_num', 1)">+</button>
				</tr>
				<tr>
					<td><input type="hidden" name="peer" value="ë°°">ğŸë°°</td>
					<td><button type="button" onclick="modifyQuantity('peer_num', -1)">-</button>
					<td><input type="number" name="peer_num" id="peer_num" value= <%= map.get("ë°°") %>></td>
					<td><button type="button" onclick="modifyQuantity('peer_num', 1)">+</button>
				</tr>
				<tr>
					<td><input type="hidden" name="mandarin" value="ê·¤">ğŸŠê·¤</td>
					<td><button type="button" onclick="modifyQuantity('mandarin_num', -1)">-</button>
					<td><input type="number" name="mandarin_num" id="mandarin_num" value=<%= map.get("ê·¤") %>></td>
					<td><button type="button" onclick="modifyQuantity('mandarin_num', 1)">+</button>
				</tr>
				<tr>
					<td colspan="2" align="center"><input type=submit value=ë‹´ê¸°></td>
				</tr>
			</table>
		</form>
		</div>
		</div>
		<script>
		function modifyQuantity(item, change) {
			var input = document.getElementById(item);
			var currentValue = parseInt(input.value);
			if (currentValue + change >= 0) {
				input.value = currentValue + change;
			}
		}
		</script>
</body>
</html>